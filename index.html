<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="css/main.css">
  <title>Sequential Website</title>
</head>
<body>
  <audio id="bg-music" loop>
    <source src="music/music.mp3" type="audio/mpeg">
  </audio>

  <div id="page0" class="page active"></div>
    <div class="container">
        <div class="envelope-wrapper">
            <div class="envelope"></div>
            <span class="corner-text">To: Mỹ Khang</span>
            <div class="heart"></div>
        </div>
    </div>
  </div>
  <!-- Page 1 -->
  <div id="page1" class="page">
    <h1></h1>
    <h2>Cuối năm đến rùi m có rảnh để đi chơi với t hong? &#128535;</h2>
    <div class="button-row">
      <button onclick="goToPage(2)">Có</button>
      <button onclick="createButton()">Hong</button>
    </div>
    <img src="img/shy.gif" alt="fun gif" style="display:block;margin:0 auto 20px auto;max-width:250px;">
  </div>

  <!-- Page 2 -->
  <div id="page2" class="page">
    <h1></h1>
    <h2>Chọn ngày đi nè &#128525;</h2>
    <input id="selectedDate" type="date" value="2025-12-27" style="display:block;margin:20px auto;padding:10px;font-size:18px;">
    <img src="img/date.gif" alt="fun gif" style="display:block;margin:0 auto 20px auto;max-width:250px;">
    <button onclick="saveDate()">Oke</button>
  </div>

  <!-- Page 3 -->
  <div id="page3" class="page">
    <h1></h1>
    <h2>Chọn chỗ đi ăn nha &#128541;</h2>

    <div class="image-item" onclick="openMenu('menu1')">
      <div class="circle-image">
        <img src="img/lau.jpg" alt="Image 1">
      </div>
      <strong>Lẩu</strong>
    </div>

    <div class="image-item" onclick="openMenu('menu2')">
      <div class="circle-image">
        <img src="img/hap.jpg" alt="Image 2">
      </div>
      <strong>Hấp</strong>
    </div>

    <div class="image-item" onclick="openMenu('menu3')">
      <div class="circle-image">
        <img src="img/bbq.jpg" alt="Image 3">
      </div>
      <strong>Nướng</strong>
    </div>

    <div class="image-item" onclick="openMenu('menu4')">
      <div class="circle-image">
        <img src="img/hanquoc.jpg" alt="Image 4">
      </div>
      <strong>Hàn</strong>
    </div>

    <div class="image-item" onclick="openMenu('menu5')">
      <div class="circle-image">
        <img src="img/steak.jpg" alt="Image 5">
      </div>
      <strong>Âu</strong>
    </div>

    <div class="image-item" onclick="openMenu('menu6')">
      <div class="circle-image">
        <img src="img/sushi.jpg" alt="Image 6">
      </div>
      <strong>Nhật</strong>
    </div>
    <div class="image-item" onclick="openMenu('menu7')">
      <div class="circle-image">
        <img src="img/chonsau.jpg" alt="Image 6">
      </div>
      <strong>Khác</strong>
    </div>
    
    <img src="img/eating.gif" alt="fun gif" style="display:block;margin:0 auto 20px auto;max-width:150px;">
    <!-- <img src="img/eating.gif" alt="fun gif" style="display:block;margin:0 auto 20px auto;max-width:150px;"> -->
    <!-- Menu Overlay -->
    <div id="menu-overlay" class="menu-overlay">
      <div class="menu-box">
        <h3 id="menu-title"></h3>
        <ul id="menu-options"></ul>
        <div class="button-row">
          <button onclick="submitImages()">Xong ròi</button>
          <button onclick="closeMenu()">Đóng</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Page 4 -->
  <div id="page4" class="page">
    <h1></h1>
    <h2>Ăn xong đi uống nước ha &#128073; &#128072;</h2>
    <img src="img/walk.gif" alt="fun gif" style="display:block;margin:0 auto 20px auto;max-width:250px;">
    <button onclick="goToPage(5)">Oke luôn</button>
  </div>

  <!-- Page 5 -->
  <div id="page5" class="page">
    <h1></h1>
    <h2>Cảm ơn nè &#128150</h2>
    <h3>Bạn đã chọn đi ăn:</h3>
    <p id="selected-dish"
        style="text-align:center;font-size:22px;font-weight:bold;">
    </p>
    <p id="selected-dish"
        style="text-align:center;font-size:22px;font-weight:bold;">
    </p>
    <h3>Ngày đi chơi:</h3>
    <p id="final-date" style="text-align:center;font-size:20px;"></p>
    <h2>Chụp màn hình lại nha hihi &#128248;</h2>
    <img src="img/hpny.gif" alt="fun gif" style="display:block;margin:0 auto 20px auto;max-width:250px;">
  </div>

  <script>
    let chosenDate = '';
    const dateInput = document.getElementById("selectedDate");

    const today = new Date();
    const yyyy = today.getFullYear();
    const mm = String(today.getMonth() + 1).padStart(2, "0");
    const dd = String(today.getDate()).padStart(2, "0");

    dateInput.min = `${yyyy}-${mm}-${dd}`;
    dateInput.max = "2025-12-31";
    const envelope = document.querySelector(".envelope-wrapper");
        const heart = document.querySelector(".heart");
        heart.addEventListener("click", ()=>{
            envelope.classList.toggle("flap");
            setTimeout(() => {
              envelope.classList.add("hide");
              goToPage(1);
            }, 1200);
            
        })

    function goToPage(num) {
      const pages = document.querySelectorAll('.page');
      pages.forEach(p => p.classList.remove('active'));


      requestAnimationFrame(() => {
      const nextPage = document.getElementById('page' + num);
      nextPage.classList.add('active');
      window.scrollTo({ top: 0, behavior: 'smooth' });
      const music = document.getElementById('bg-music');
        if (music.paused) {
          music.volume = 0.3;
          music.play().catch(() => {});
        }
      });
    }
    function saveDate() {
      const d = document.getElementById('selectedDate').value;
      chosenDate = d;
      goToPage(3);
    }
    function formatDate(dateStr) {
      if (!dateStr) return '';
      const d = new Date(dateStr);
      const day = String(d.getDate()).padStart(2, '0');
      const month = String(d.getMonth() + 1).padStart(2, '0');
      const year = d.getFullYear();
      return `${day}/${month}/${year}`;
    }
    
    let selectedMenuKey = "";
    let selectedDish = "";

    const menus = {
      menu1: {
        label: "Lẩu",
        items: [
          { name: "Haidilao", img: "img/haidilao.jpg" },
          { name: "Dragon Hot Pot", img: "img/dragon.jpg" },
          { name: "Manwah", img: "img/manwah.jpg" },
          { name: "Chọn sau", img: "img/chonsau.jpg" }
        ]
      },

      menu2: {
        label: "Hấp",
        items: [
          { name: "LongWang", img: "img/longwang.jpg" },
          { name: "Chang Khang Kung", img: "img/changkangkung.jpg" },
          { name: "XinWah", img: "img/xinwah.jpg" },
          { name: "Chọn sau", img: "img/chonsau.jpg" }
        ]
      },

      menu3: {
        label: "BBQ",
        items: [
          { name: "Mako", img: "img/mako.jpg" },
          { name: "Rakuen", img: "img/rakuen.jpg" },
          { name: "Anrakutei", img: "img/anrakutei.jpg" },
          { name: "Chọn sau", img: "img/chonsau.jpg" }
        ]
      },

      menu4: {
        label: "Hàn",
        items: [
          { name: "Korea House", img: "img/koreahouse.jpg" },
          { name: "Hanuri", img: "img/hanuri.jpg" },
          { name: "Hancook", img: "img/hancook.png" },
          { name: "Chọn sau", img: "img/chonsau.jpg" }
        ]
      },

      menu5: {
        label: "Âu",
        items: [
          { name: "Bò Tiêu", img: "img/botieu.jpg" },
          { name: "Mỳ Ý AHoài", img: "img/myy.jpg" },
          { name: "Le Monde Steak", img: "img/lemonde.jpg" },
          { name: "Chọn sau", img: "img/chonsau.jpg" }
        ]
      },

      menu6: {
        label: "Nhật",
        items: [
          { name: "Ikigai Sushi", img: "img/ikigai.jpg" },
          { name: "Hokkaido Sachi", img: "img/hokkaido.jpg" },
          { name: "Izakaya Unatoto", img: "img/izauna.jpg" }
        ]
      },
      menu7: {
        label: "Khác",
        items: [
          { name: "Mỳ cay", img: "img/chonsau.jpg" },
          { name: "Bún bò", img: "img/chonsau.jpg" },
          { name: "Nem nướng", img: "img/chonsau.jpg" },
          { name: "Chọn sau", img: "img/chonsau.jpg" }
        ]
      }
    };

    function openMenu(menuId) {
      selectedMenuKey = menuId;
      selectedDish = "";

      const overlay = document.getElementById("menu-overlay");
      const title = document.getElementById("menu-title");
      const list = document.getElementById("menu-options");

      const menu = menus[menuId];

      title.textContent = menu.label;
      list.innerHTML = "";
      overlay.style.display = "flex";

      menu.items.forEach(item => {
        const li = document.createElement("li");
        li.style.display = "flex";
        li.style.alignItems = "center";
        li.style.gap = "12px";

        const img = document.createElement("img");
        img.src = item.img;
        img.style.width = "50px";
        img.style.height = "50px";
        img.style.borderRadius = "10px";

        const span = document.createElement("span");
        span.textContent = item.name;
        span.style.flex = "1";
        span.style.textAlign = "center";

        li.appendChild(img);
        li.appendChild(span);

        li.onclick = () => {
          document
            .querySelectorAll("#menu-options li")
            .forEach(x => x.classList.remove("active"));

          li.classList.add("active");
          selectedDish = item.name;
        };

        list.appendChild(li);
      });
    }


    function closeMenu() {
      document.getElementById('menu-overlay').style.display = 'none';
    }

    function submitImages() {
      document.getElementById("selected-dish").textContent = `${menus[selectedMenuKey].label} – ${selectedDish}`;

      document.getElementById('final-date').textContent = chosenDate;

      goToPage(4);
    }
    function  createButton() {
      const btn = document.createElement("button");
      btn.textContent = "Có đi màaaa";

      btn.onclick = () => {
        goToPage(2);
      };

      page1.appendChild(btn);
    }
  </script>
</body>
</html>
